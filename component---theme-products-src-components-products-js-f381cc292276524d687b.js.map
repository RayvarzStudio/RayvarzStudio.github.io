{"version":3,"sources":["webpack:///../theme-products/src/Components/Layout.js","webpack:///../theme-products/src/Components/Products.js"],"names":["Layout","query","Products","data","pageContext","React","useState","products","setProducts","NumberWithCommas","x","toString","replace","useEffect","allProducts","i","mdNode","allMarkdownRemark","nodes","filter","p","frontmatter","productId","results","objectId","images","allProductsImages","name","Image","length","childImageSharp","fluid","birthtime","parent","order","Name","title","sortedProducts","sort","a","b","Date","birthTime","allBannerImages","extension","style","width","alt","src","publicURL","className","map","key","data-aos","data-aos-duration","DiscountedPrice","Price","onClick","id","window","location","origin"],"mappings":"kKAGeA,E,UAAf,E,iCCoFaC,GAFEC,UA/EE,SAAC,GAAyB,IAAxBC,EAAuB,EAAvBA,KAAMC,EAAiB,EAAjBA,YAAiB,EAENC,IAAMC,SAAS,IAAxCC,EAF+B,KAErBC,EAFqB,KA4BtC,SAASC,EAAiBC,GACtB,OAAOA,EAAEC,WAAWC,QAAQ,wBAAyB,KAGzD,OA5BAP,IAAMQ,WAAU,WAGZ,IAFA,IAAIC,EAAcV,EAAYU,YADN,WAGfC,GACD,IAAIC,EAASb,EAAKc,kBAAkBC,MAAMC,QAAO,SAAAC,GAAC,OAAIA,EAAEC,YAAYC,YAAcR,EAAYS,QAAQR,GAAGS,YAAU,GACnH,GAAGR,EAAO,CACN,IAAIS,EAAStB,EAAKuB,kBAAkBR,MAAMC,QAAO,SAAAC,GAAC,OAAIJ,EAAOK,YAAYC,YAAcF,EAAEO,QACzFb,EAAYS,QAAQR,GAAGa,MAAQH,EAAOI,OAAS,EAAIJ,EAAO,GAAGK,gBAAgBC,MAAO,KACpFjB,EAAYS,QAAQR,GAAGiB,UAAYhB,EAAOiB,OAAOD,UACjDlB,EAAYS,QAAQR,GAAGmB,MAAQlB,EAAOK,YAAYa,MAClDpB,EAAYS,QAAQR,GAAGoB,KAAOnB,EAAOK,YAAYe,QAPpDrB,EAAI,EAAGA,EAAID,EAAYS,QAAQM,OAAQd,IAAM,EAA7CA,GAUL,IAAIsB,EAAiBvB,EAAYS,QAC5Be,MAAK,SAACC,EAAEC,GAAH,OAAS,IAAIC,KAAKF,EAAEG,WAAa,IAAID,KAAKD,EAAEE,cACjDJ,MAAK,SAACC,EAAGC,GAAJ,OAAUA,EAAEN,MAAQK,EAAEL,SAEpC1B,EAAY6B,KACb,IAWC,kBAACrC,EAAD,KACI,kBAAC,IAAD,CAAKoC,MAAOhC,EAAYgC,QAEkB,IAAtCjC,EAAKwC,gBAAgBzB,MAAMW,SAA6D,QAA5C1B,EAAKwC,gBAAgBzB,MAAM,GAAG0B,UACtE,yBAAKC,MAAO,CAACC,MAAM,QAASC,IAAK5C,EAAKwC,gBAAgBzB,MAAM,GAAGS,KAC1DqB,IAAK7C,EAAKwC,gBAAgBzB,MAAM,GAAG+B,YACxC,kBAAC,IAAD,CAAKF,IAAK5C,EAAKwC,gBAAgBzB,MAAM,GAAGS,KACnCI,MAAO5B,EAAKwC,gBAAgBzB,MAAM,GAAGY,gBAAgBC,SAGlE,yBAAKmB,UAAU,kDACX,yBAAKA,UAAU,oEACV3C,EAAS4C,KAAI,SAAC/B,EAAGL,GAAJ,OACV,yBAAKqC,IAAKhC,EAAEe,KAAMe,UAAU,6CACvBG,WAAUtC,EAAI,EAAI,aAAe,YACjCuC,oBAAkB,OAClBlC,EAAEQ,MACC,kBAAC,IAAD,CAAKsB,UAAU,MAAMnB,MAAOX,EAAEQ,QAAW,KAC7C,wBAAIsB,UAAU,iBAAiB9B,EAAEe,MAChCf,EAAEmC,kBAAoBnC,EAAEoC,MACrB,yBAAKN,UAAU,QACX,6CACA,0BAAMA,UAAU,qBAAqBzC,EAAiBW,EAAEoC,QACxD,uCACA,0BAAMN,UAAU,QAAQzC,EAAiBW,EAAEmC,kBAC3C,wCAEJ,6BACI,6CACA,0BAAML,UAAU,QAAQzC,EAAiBW,EAAEoC,QAC3C,wCAER,4BACIN,UAAU,uGACVO,QAAS,kBA3CxBC,EA2CkCtC,EAAEI,cA1C7CmC,OAAOC,SAAWD,OAAOC,SAASC,OAAS,YAAcH,EAAK,KADlE,IAAaA,IAyCW,gBAgBV","file":"component---theme-products-src-components-products-js-f381cc292276524d687b.js","sourcesContent":["import React from \"react\"\r\nimport {Layout} from \"theme-layout\";\r\n\r\nexport default Layout;","import React from \"react\"\r\nimport Layout from \"./Layout\";\r\nimport Img from 'gatsby-image'\r\nimport {graphql} from 'gatsby'\r\nimport {SEO} from \"theme-seo\";\r\n\r\nconst Products = ({data, pageContext}) => {\r\n\r\n    const [products, setProducts] = React.useState([])\r\n\r\n    React.useEffect(function () {\r\n        let allProducts = pageContext.allProducts;\r\n\r\n        for (let i = 0; i < allProducts.results.length; i++) {\r\n                let mdNode = data.allMarkdownRemark.nodes.filter(p => p.frontmatter.productId === allProducts.results[i].objectId)[0];\r\n                if(mdNode){\r\n                    let images = data.allProductsImages.nodes.filter(p => mdNode.frontmatter.productId === p.name)\r\n                    allProducts.results[i].Image = images.length > 0 ? images[0].childImageSharp.fluid: null;\r\n                    allProducts.results[i].birthtime = mdNode.parent.birthtime;\r\n                    allProducts.results[i].order = mdNode.frontmatter.order;\r\n                    allProducts.results[i].Name = mdNode.frontmatter.title;\r\n                }\r\n            }\r\n            var sortedProducts = allProducts.results\r\n                .sort((a,b) => new Date(a.birthTime) - new Date(b.birthTime))\r\n                .sort((a, b) => b.order - a.order );\r\n\r\n        setProducts(sortedProducts)\r\n    }, []);\r\n\r\n    function Buy(id) {\r\n        window.location = window.location.origin + \"/invoice-\" + id + \"/\";\r\n    }\r\n\r\n    function NumberWithCommas(x) {\r\n        return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n    }\r\n\r\n    return (\r\n        <Layout>\r\n            <SEO title={pageContext.title} />\r\n            {\r\n                data.allBannerImages.nodes.length !== 0 && (data.allBannerImages.nodes[0].extension === \"svg\" ?\r\n                    <img style={{width:\"100%\"}} alt={data.allBannerImages.nodes[0].name}\r\n                         src={data.allBannerImages.nodes[0].publicURL}   /> :\r\n                    <Img alt={data.allBannerImages.nodes[0].name}\r\n                         fluid={data.allBannerImages.nodes[0].childImageSharp.fluid}/>)\r\n\r\n            }\r\n            <div className=\"bg-gray-100 my-24 p-2 w-11/12 lg:w-3/5 mx-auto\">\r\n                <div className=\"flex flex-col lg:flex-row flex-1 justify-around text-center my-1\">\r\n                    {products.map((p, i) => (\r\n                        <div key={p.Name} className=\"bg-white sm:w-11/12 lg:w-1/2 m-2 shadow-lg\"\r\n                             data-aos={i % 2 ? \"fade-right\" : \"fade-left\"}\r\n                             data-aos-duration=\"600\">\r\n                            {p.Image ?\r\n                                <Img className=\"m-4\" fluid={p.Image}/> : null}\r\n                            <h3 className=\"text-2xl my-8\">{p.Name}</h3>\r\n                            {p.DiscountedPrice !== p.Price ?\r\n                                <div className=\"my-6\">\r\n                                    <span>قیمت محصول:</span>\r\n                                    <span className=\"mx-2 line-through\">{NumberWithCommas(p.Price)}</span>\r\n                                    <span>تومان</span>\r\n                                    <span className=\"mx-2\">{NumberWithCommas(p.DiscountedPrice)}</span>\r\n                                    <span>تومان</span>\r\n                                </div> :\r\n                                <div>\r\n                                    <span>قیمت محصول:</span>\r\n                                    <span className=\"mx-2\">{NumberWithCommas(p.Price)}</span>\r\n                                    <span>تومان</span>\r\n                                </div>}\r\n                            <button\r\n                                className=\"block mx-auto my-8 w-4/5 bg-teal-600 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full \"\r\n                                onClick={() => Buy(p.objectId)}>\r\n                                خرید\r\n                            </button>\r\n                        </div>\r\n                    ))}\r\n\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n\r\n}\r\nexport default Products;\r\n\r\nexport const query = graphql`\r\n query allProducts {\r\n  allMarkdownRemark(filter: {fileAbsolutePath: {regex: \"/product/\"  }})\r\n   {\r\n    nodes {\r\n      html\r\n      fields {\r\n        slug\r\n      }\r\n      frontmatter {\r\n        description\r\n        title\r\n        productId\r\n        order\r\n      }\r\n      parent {\r\n          ... on File {\r\n            birthTime(formatString: \"MM/DD/YYYY\")\r\n          }\r\n        }\r\n    }\r\n  }\r\n allProductsImages: allFile(filter: { sourceInstanceName: { eq: \"product\" } }) {\r\n    nodes {\r\n      name\r\n      childImageSharp{\r\n        fluid(maxWidth:400){\r\n            ...GatsbyImageSharpFluid\r\n          } \r\n          }\r\n    }\r\n  }\r\n  allBannerImages: allFile(filter: { sourceInstanceName: { eq: \"product\" }, name:{eq:\"product\"}}) {\r\n    nodes {\r\n      name \r\n      publicURL\r\n      extension\r\n      childImageSharp {\r\n        fluid (maxWidth: 2500 ) {\r\n          ...GatsbyImageSharpFluid\r\n        }\r\n       }\r\n    }\r\n  }\r\n}`;"],"sourceRoot":""}